<div class="position-relative">
  <app-sidebar-game [isSidebarCollapsed]="isSidebarCollapsed" (sidebarToggle)="onSidebarToggle()">
  </app-sidebar-game>
  <button class="sidebar-toggle-btn" [ngClass]="{ 'sidebar-collapsed': isSidebarCollapsed }"
    (click)="onSidebarToggle()">
    <i class="fas fa-bars"></i>
  </button>
</div>
<div class="container">
  <!-- üü¶ LEFT: GRID -->
  <div class="grid-area">
    <!-- Column Labels -->
    <div class="labels-row">
      <div class="corner-cell"></div>
      <div *ngFor="let label of columnLabels" class="label-cell">
        {{ label }}
      </div>
    </div>

    <!-- Grid Rows -->
    <div *ngFor="let row of rowLabels; let rowIndex = index" class="grid-row">
      <div class="label-cell">{{ row }}</div>
      <div *ngFor="let col of columnLabels; let colIndex = index" class="grid-cell"
        [class.occupied]="grid[rowIndex][colIndex].occupiedBy" [class.locked]="grid[rowIndex][colIndex].isLocked"
        (click)="onCellClick(grid[rowIndex][colIndex])">
        <ng-container *ngIf="grid[rowIndex][colIndex].occupiedBy as shipId">
          <img *ngIf="getShipById(shipId)?.icon" [src]="getShipById(shipId)?.icon" [ngClass]="getShipById(shipId)?.icon" width="24" height="24"/>
          <i *ngIf="getShipById(shipId)?.icon; else defaultIcon" [ngClass]="getShipById(shipId)?.icon"
            title="{{ getShipById(shipId)?.name }}"></i>
          <ng-template #defaultIcon>
            üö¢
          </ng-template>
        </ng-container>
      </div>
    </div>
  </div>

  <!-- üö¢ RIGHT: SHIP LIST & CONTROLS -->
  <div class="sidebar">
    <h3>–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ—Ä–∞–±–ª–∏</h3>
    <div class="ship-list">
      <div *ngFor="let ship of ships" class="ship-item" [class.placed]="ship.placed" (click)="selectShip(ship)"
        [title]="ship.name + ' (size ' + ship.size + ')'">
        <div class="ship-icon">
          <img *ngIf="ship.icon" [src]="ship.icon" [ngClass]="ship.icon" width="24" height="24"/>
          <i *ngIf="ship.icon; else defaultIcon" [ngClass]="ship.icon"></i>
          <ng-template #defaultIcon>
            üö¢
          </ng-template>
        </div>

        <div class="ship-preview">
          <div class="ship-block" *ngFor="let _ of [].constructor(ship.size)"></div>
        </div>

        <span class="ship-name">{{ ship.name }}</span>
      </div>
    </div>

    <div class="buttons">
      <button mat-raised-button color="primary" (click)="randomizeShips()" [disabled]="locked">
        üîÄ –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä
      </button>
      <button mat-raised-button color="accent" (click)="lockShips()" [disabled]="locked">
        üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä–∞–±–ª–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
      </button>
      <!-- <button mat-button color="warn" (click)="resetShips()" [disabled]="!locked">
        üîÅ Reset (Unlock)
      </button> -->
    </div>
  </div>
</div>